import{_ as m}from"./index.3d433a1e.js";import{B as P,M as v,a as x,V as I,S as V,r as _}from"./three.module.c530657f.js";const K=new P,L=I;class A{constructor(s=0,a=0){this.x=s,this.z=a,this.targetIndex=0,this.speed=.01,this.target=null,this.v=new L(0,0,0),this.hp=100,this.material=new v,this.mesh=new x(K,this.material),this.mesh.scale.set(.3,.3,.3),this.mesh.position.set(this.x,0,this.z)}update(s){if(this.target){const a=this.mesh.position.distanceTo(this.target.mesh.position);a>1?(this.mesh.lookAt(this.target.mesh.position),this.mesh.translateZ(Math.min(a/1e4*s,this.speed*s))):this.hp-=1}}}const O=async()=>{const{Cameraman:l}=await m(()=>import("./Cameraman.c12fd7dd.js"),["assets/Cameraman.c12fd7dd.js","assets/three.module.c530657f.js"]),{GameLoop:s}=await m(()=>import("./GameLoop.40d4a0a8.js"),["assets/GameLoop.40d4a0a8.js","assets/three.module.c530657f.js"]),{Central:a}=await m(()=>import("./Central.1869d60f.js"),["assets/Central.1869d60f.js","assets/three.module.c530657f.js"]),{GamePad:w}=await m(()=>import("./Gamepad.722ff8d6.js"),[]),n=new V,u=new l(n,0,10,0),i=new Map;i.set("KeyW","KeyUp"),i.set("KeyW","KeyUp"),i.set("KeyW","KeyUp");for(let e=0;e<10;e++)i.set(`spawn${e}`,`Digit${e}`);const M=new w(i),p=new a;n.add(p.mesh);const h=[];new s().play((e,c)=>{p.update(c),u.update(c),f(e,c);let t=0;for(;t<h.length;){const r=h[t];r.update(e),r.hp<=0?(n.remove(r.mesh),h.splice(t,1)):t++}});function f(e=0,c=0){for(let t=0;t<10;t++)if(M.once(`spawn${t}`)||!_(100)){const d=_(Math.PI*2,0,!0),y=Math.cos(d)*6,g=Math.sin(d)*6,E=t*Math.PI*.2/10,o=new A(y,g);o.hp=3*t,o.speed=.011-.001*(t+1),h.push(o),o.target=p,o.material.color.setHSL(E,1,.5),n.add(o.mesh)}}};export{O as default};
