import{B as w,r as u,M as p,a as g,b as x,R as y,C as l,S as M,P as E,W as I}from"./three.module.e2623146.js";const P=new w,S=.05,m=.1;class b{constructor(t,e=0,h=0){this.path=t,this.x=e,this.y=h,this.speed=u(S,m),this.targetIndex=0;const s=Math.round(this.speed/m*255),r=Math.round(255-s/2),c=new p({color:`rgba(${s}, ${r}, 0)`,opacity:.2});this.mesh=new g(P,c),this.mesh.scale.set(.3,.3,.3),this.mesh.position.set(this.x,this.y,0)}update(){if(this.target||(this.targetIndex=0,this.changeTarget()),this.target){const{x:t,y:e}=this.target;t<this.x&&(this.x-=this.speed),t>this.x&&(this.x+=this.speed),e<this.y&&(this.y-=this.speed),e>this.y&&(this.y+=this.speed),this.target.isInRange(this.mesh,this.speed*1.5)&&this.changeTarget()}this.mesh.position.set(this.x,this.y,0),this.mesh.rotation.x+=this.speed,this.mesh.rotation.y+=this.speed}changeTarget(){this.target=this.path.getNext(this.targetIndex++),this.target||(this.targetIndex=0,this.target=this.path.getNext(this.targetIndex++))}}class W{constructor(t=[]){this.segments=t}getNext(t){const e=this.segments[t];return e?e[x(0,e.length-1)]:null}forEach(t){this.segments.forEach(e=>e.forEach(t))}update(){this.forEach(t=>t.update())}}const R=new y,T=new p({color:35071,opacity:.5});class k{constructor(t,e){this.x=t,this.y=e,this.clock=new l,this.mesh=new g(R,T),this.mesh.scale.set(.2,.2,.02),this.mesh.position.x=t,this.mesh.position.y=e}isInRange(t,e=.1){return t!=null&&t.position?t.position.distanceTo(this.mesh.position)<e:!1}update(){this.mesh.rotateZ(2),this.mesh.scale.y=.2+Math.sin(this.clock.getElapsedTime()*10)*.02}}const A={paths:[{spawns:["monsterA","monsterB"],segments:[[[-4,0]],[[-3,-2],[-2,2],[-1,-2]],[[-1,-2]],[[0,1],[0,0]],[[3,2]],[[7,3]],[[3,4]],[[8,5]],[[3,6]]]},{spawns:["monsterA","monsterB"],segments:[[[-14,0]],[[-13,-2],[-12,2],[-11,-2]],[[-11,-2]],[[10,11],[10,10]],[[13,12]],[[17,13]],[[13,14]],[[18,15]],[[13,16]]]}]},H=()=>{const o=A.paths.map(n=>new W(n.segments.map(i=>i.map(([a,f])=>new k(a,f))))),t=new M,e=new E(75,window.innerWidth/window.innerHeight,.1,1e3);e.position.z=25,e.position.y=-8,e.rotation.x=Math.PI*.2;const h=new I;h.setSize(window.innerWidth,window.innerHeight);const s=h.domElement;document.body.appendChild(s);const r=[];o.forEach(n=>{for(var i=0;i<40;i++){const a=new b(n);t.add(a.mesh),r.push(a)}n.forEach(a=>t.add(a.mesh))});const c=new l;function d(){requestAnimationFrame(d),(s.width!==s.clientWidth||s.height!==s.clientHeight)&&(h.setSize(s.clientWidth,s.clientHeight,!1),e.aspect=s.clientWidth/s.clientHeight,e.updateProjectionMatrix());const n=c.getElapsedTime()*.1*Math.PI;e.position.set(Math.cos(n)*10,-10+Math.sin(n)*10,25),e.lookAt(0,0,0),h.render(t,e),o.forEach(i=>i.update()),r.forEach(i=>i.update())}d()};export{H as default};
