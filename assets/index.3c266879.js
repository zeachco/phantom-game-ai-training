import{_ as m}from"./index.7ad25399.js";import{B as I,M as P,a as v,V as x,S as V}from"./three.module.13bf8b03.js";import{a as _}from"./math.9c77be8d.js";const K=new I,L=x;class A{constructor(s=0,a=0){this.x=s,this.z=a,this.targetIndex=0,this.speed=.01,this.target=null,this.v=new L(0,0,0),this.hp=100,this.material=new P,this.mesh=new v(K,this.material),this.mesh.scale.set(.3,.3,.3),this.mesh.position.set(this.x,0,this.z)}update(s){if(this.target){const a=this.mesh.position.distanceTo(this.target.mesh.position);a>1?(this.mesh.lookAt(this.target.mesh.position),this.mesh.translateZ(Math.min(a/1e4*s,this.speed*s))):this.hp-=1}}}const R=async()=>{const{Cameraman:l}=await m(()=>import("./Cameraman.d4292d61.js"),["assets/Cameraman.d4292d61.js","assets/three.module.13bf8b03.js"]),{GameLoop:s}=await m(()=>import("./GameLoop.ae440459.js"),["assets/GameLoop.ae440459.js","assets/three.module.13bf8b03.js"]),{Central:a}=await m(()=>import("./Central.06af8128.js"),["assets/Central.06af8128.js","assets/three.module.13bf8b03.js"]),{GamePad:w}=await m(()=>import("./Gamepad.cc834c92.js"),[]),n=new V,u=new l(n,0,10,0),i=new Map;i.set("KeyW","KeyUp"),i.set("KeyW","KeyUp"),i.set("KeyW","KeyUp");for(let e=0;e<10;e++)i.set(`spawn${e}`,`Digit${e}`);const f=new w(i),p=new a;n.add(p.mesh);const h=[];new s().play((e,c)=>{p.update(c),u.update(c),M(e,c);let t=0;for(;t<h.length;){const r=h[t];r.update(e),r.hp<=0?(n.remove(r.mesh),h.splice(t,1)):t++}});function M(e=0,c=0){for(let t=0;t<10;t++)if(f.once(`spawn${t}`)||!_(0,100)){const d=_(0,Math.PI*2),y=Math.cos(d)*6,g=Math.sin(d)*6,E=t*Math.PI*.2/10,o=new A(y,g);o.hp=3*t,o.speed=.011-.001*(t+1),h.push(o),o.target=p,o.material.color.setHSL(E,1,.5),n.add(o.mesh)}}};export{R as default};
