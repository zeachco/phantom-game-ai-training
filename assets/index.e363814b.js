import{_ as p}from"./index.90780025.js";import{B as I,M as P,a as v,V as x,S as V,b as _}from"./three.module.3aad9aee.js";const K=new I,L=x;class b{constructor(s=0,a=0){this.x=s,this.z=a,this.targetIndex=0,this.speed=.01,this.target=null,this.v=new L(0,0,0),this.hp=100,this.material=new P,this.mesh=new v(K,this.material),this.mesh.scale.set(.3,.3,.3),this.mesh.position.set(this.x,0,this.z)}update(s){if(this.target){const a=this.mesh.position.distanceTo(this.target.mesh.position);a>1?(this.mesh.lookAt(this.target.mesh.position),this.mesh.translateZ(Math.min(a/1e4*s,this.speed*s))):this.hp-=1}}}const O=async()=>{const{Cameraman:l}=await p(()=>import("./Cameraman.257027c9.js"),["assets/Cameraman.257027c9.js","assets/three.module.3aad9aee.js"]),{GameLoop:s}=await p(()=>import("./GameLoop.1fe23b1e.js"),["assets/GameLoop.1fe23b1e.js","assets/three.module.3aad9aee.js"]),{Central:a}=await p(()=>import("./Central.2c89e797.js"),["assets/Central.2c89e797.js","assets/three.module.3aad9aee.js"]),{GamePad:w}=await p(()=>import("./Gamepad.8a108b30.js"),[]),n=new V,u=new l(n,0,10,0),i=new Map;i.set("KeyW","KeyUp"),i.set("KeyW","KeyUp"),i.set("KeyW","KeyUp");for(let e=0;e<10;e++)i.set(`spawn${e}`,`Digit${e}`);const M=new w(i),m=new a;n.add(m.mesh);const h=[];new s().play((e,c)=>{m.update(c),u.update(c),f(e,c);let t=0;for(;t<h.length;){const r=h[t];r.update(e),r.hp<=0?(n.remove(r.mesh),h.splice(t,1)):t++}});function f(e=0,c=0){for(let t=0;t<10;t++)if(M.once(`spawn${t}`)||!_(0,100)){const d=_(0,Math.PI*2),y=Math.cos(d)*6,g=Math.sin(d)*6,E=t*Math.PI*.2/10,o=new b(y,g);o.hp=3*t,o.speed=.011-.001*(t+1),h.push(o),o.target=m,o.material.color.setHSL(E,1,.5),n.add(o.mesh)}}};export{O as default};
